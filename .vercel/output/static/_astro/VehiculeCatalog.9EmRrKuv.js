import{j as e}from"./jsx-runtime.BqEXxvvU.js";import{r as o}from"./index.DHQ29l5n.js";import{V as E,f as V}from"./VehiculeCard.BMJjYrkr.js";function k({brands:s,selectedBrand:c,searchQuery:n,sortOrder:u,onBrandChange:l,onSearchChange:p,onSortChange:i}){const m=a=>{p(a.target.value)},h=a=>{l(a.target.value)},x=a=>{i(a.target.value)};return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8 bg-gray-50 p-2 rounded-lg",children:[e.jsx("input",{type:"text",placeholder:"Buscar vehículos...",value:n,onChange:m,className:"p-2 rounded-md border border-gray-300 bg-white text-black"}),e.jsxs("select",{value:c,onChange:h,className:"p-2 rounded-md border border-gray-300 bg-white text-black",children:[e.jsx("option",{value:"",children:"Todas las marcas"}),s.map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsxs("select",{value:u,onChange:x,className:"p-2 rounded-md border border-gray-300 bg-white text-black",children:[e.jsx("option",{value:"desc",children:"Mayor precio"}),e.jsx("option",{value:"asc",children:"Menor precio"})]})]})}function B({currentPage:s,totalPages:c,onPageChange:n}){return e.jsxs("div",{className:"flex justify-center gap-2 mt-8",children:[e.jsx("button",{onClick:()=>n(s-1),disabled:s===1,className:"px-4 py-2 rounded-md bg-gray-800 text-white disabled:opacity-50",children:"Anterior"}),e.jsxs("span",{className:"px-4 py-2 text-black",children:["Página ",s," de ",c]}),e.jsx("button",{onClick:()=>n(s+1),disabled:s===c,className:"px-4 py-2 rounded-md bg-gray-800 text-white disabled:opacity-50",children:"Siguiente"})]})}const g=12;function L(){const[s,c]=o.useState([]),[n,u]=o.useState(""),[l,p]=o.useState(""),[i,m]=o.useState("desc"),[h,x]=o.useState(1),[a,f]=o.useState(!0),C=async()=>{try{const r=await V();c(r),f(!1)}catch(r){console.error("Error fetching vehicles:",r),f(!1)}};o.useEffect(()=>{C()},[]);const S=o.useMemo(()=>[...new Set(s.filter(t=>t.brand&&typeof t.brand=="string").map(t=>t.brand))].sort((t,d)=>t.localeCompare(d)),[s]),b=o.useMemo(()=>{let r=[...s];if(n){const t=n.toLowerCase();r=r.filter(d=>d.name.toLowerCase().includes(t)||d.brand.toLowerCase().includes(t))}return l&&(r=r.filter(t=>t.brand===l)),r.sort((t,d)=>{const j=parseFloat(t.price)||0,y=parseFloat(d.price)||0;return i==="desc"?y-j:j-y}),r},[s,n,l,i]),v=Math.ceil(b.length/g),w=b.slice((h-1)*g,h*g),N=r=>{x(r),window.scrollTo({top:0,behavior:"smooth"})};return e.jsxs("div",{children:[e.jsx(k,{brands:S,selectedBrand:l,searchQuery:n,sortOrder:i,onBrandChange:p,onSearchChange:u,onSortChange:m}),a?e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gray-900"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-col-1 md:grid-cols-1 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:w.map(r=>e.jsx(E,{vehicle:r},r.id))}),b.length>g&&e.jsx(B,{currentPage:h,totalPages:v,onPageChange:N})]})]})}export{L as VehicleCatalog};
